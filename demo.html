<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Desktop Layout Prototype</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
</head>

<body>
    <div class="wrapper">
        <nav>
            Sidebar navigation (sticky)
            <br />
            <button id="content-overlay-trigger">Toogle the content-overlay</button>
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
            <br /> Menu Item
        </nav>
        <header>
            Header (fixed)
        </header>
        <main>
            START
            <br /> Lorem ipsum dolor sit, amet consectetur adipisicing elit. In nisi nihil commodi odit iure rerum eveniet non
            enim deleniti ipsam esse reprehenderit neque, nostrum voluptate exercitationem suscipit? Repellat consectetur
            iure magnam porro similique possimus expedita quas tempora! Magnam voluptate voluptatum inventore aliquam amet
            pariatur accusamus, iusto repudiandae ab nobis aperiam! Nesciunt nemo ullam iste quasi veritatis numquam, magnam
            odio consectetur quia exercitationem dolor quae amet quibusdam laudantium veniam suscipit sint vel est doloremque
            totam laborum voluptates quidem aliquam! A architecto, consequatur dolores minus porro quae? Officia reprehenderit
            iste eius pariatur labore quod dolore eum omnis, error illo totam ducimus hic qui accusamus, quidem enim doloribus
            fugit atque vitae, minus ratione provident exercitationem incidunt. Et, nemo optio. Ab esse distinctio dolor
            tempore placeat, eligendi natus nobis quod ipsum reprehenderit ducimus iusto nostrum exercitationem iure facilis
            doloribus quidem nihil harum rerum neque, saepe animi quae aperiam corporis! Officiis commodi pariatur non, laborum
            culpa voluptatibus quidem beatae quia consequuntur fugit ab ducimus, iure quaerat illum consequatur id modi similique
            esse laboriosam quas ullam possimus dolorum eum. Exercitationem ab aspernatur autem iste rem reprehenderit distinctio
            explicabo molestiae nihil repellat necessitatibus, quibusdam, laudantium rerum fuga dignissimos vel voluptatem
            qui optio aliquam excepturi, quasi nemo? Nihil veritatis tempore earum repudiandae aut cum, est, necessitatibus
            aperiam fugiat rem veniam voluptatem reiciendis nostrum suscipit sequi. Vitae saepe deserunt porro? Repellat
            eveniet quo commodi unde. Possimus, beatae. Est ut voluptatibus, numquam, accusantium quaerat, magni dicta exercitationem
            expedita aliquid libero nobis beatae quae adipisci. Nobis corporis aut modi libero ullam asperiores assumenda
            consequatur at esse aliquid laborum velit odit explicabo consequuntur ab quae quam eveniet vero, quod veniam
            doloremque ipsam labore! Totam minima repudiandae veritatis laudantium itaque. Sunt voluptatum excepturi ab nulla
            provident! Nobis, maiores tempore est numquam culpa magni quibusdam assumenda laboriosam quis tempora excepturi
            eaque consectetur, possimus fuga?
            <br /> END
        </main>
        <footer>
            <div class="footer-top">
                Footer Top
            </div>
            <div class="footer-bottom">
                Footer Bottom
            </div>
        </footer>
        <div class="content-overlay"></div>
    </div>

    <script>
        // Makes the sidebar nav sticky.
        window.addEventListener("scroll", stickySidebarNavOnScrll)

        var nav = document.querySelector("nav");

        var mainHeight = document.querySelector("main").offsetHeight;
        var headerHeight = document.querySelector("header").offsetHeight;
        var footerTopHeight = document.querySelector(".footer-top").offsetHeight;

        function stickySidebarNavOnScrll() {
            var screenHeight = screenSize()[1];
            var scrollTop = pageOffset()[1];

            var offset = scrollTop + screenHeight - headerHeight - mainHeight

            if (offset > 0) {
                nav.style.top = "calc(100% - " + nav.offsetHeight + "px - " + footerTopHeight + "px)"
                nav.style.position = "absolute"
            } else {
                nav.style = ""
            }
        }

        // content-overlay trigger demo
        var contentOverlayTigger = document.querySelector("#content-overlay-trigger");
        var contentOverlay = document.querySelector(".content-overlay");

        contentOverlayTigger.addEventListener("click", function () {
            if (!contentOverlay.classList.contains("open")) {
                contentOverlay.classList.add("open");
            } else {
                contentOverlay.classList.remove("open");
            }
        })
        ///////////////////////////////
        // Helpers

        // Cross-browser method for detecting the scrollTop of the
        // browser window:
        // https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY#Notes
        function pageOffset() {
            var supportPageOffset = window.pageXOffset !== undefined;
            var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");

            var x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;
            var y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;

            return [
                x, y
            ]
        }

        // Cross-browser screen width/height polling:
        // https://gist.github.com/jhafner/4119231
        function screenSize() {
            var w = window, d = document, e = d.documentElement, g = d.getElementsByTagName('body')[0], width = w.innerWidth || e.clientWidth || g.clientWidth, height = w.innerHeight || e.clientHeight || g.clientHeight;

            return [
                width, height
            ]
        }
    </script>
</body>

</html>